<<<<<<< HEAD
​	
=======
# 最优飞行计划

## 背景
在甲乙双方的一场战争中,一部分甲方部队被乙方部队包围长达4个月。由于乙方封锁了所有水陆交通通道,被包围的甲方部队只能依靠空中交通维持供给。运送4个月的供给分别需要2次,3次,3次,4次飞行。每次飞行编队由50架飞机组成(每架飞机需要3名飞行员),可以运送$10^5t$物资。每架飞机每个月只能飞行一次,每名飞行员每个月也只能飞行一次。在执行完成运输任务后的返回途有20%的飞机会被乙方部队击落,相应的飞行员也因此牺牲或失踪。在第1个月开始时,甲方拥有110架飞机和330名熟练的飞行员。在每个月开始时,甲方可以招聘新飞行员和购买新飞机。新飞机必须经过一个月的检査后オ可以投入使用,新飞行员必须在熟练飞行员的指导下经过一个月的训练才能投入飞行。只有不执行当月飞行任务的熟练飞行员可以作为当月的教练指导新飞行员进行训练。每名熟练飞行员可以作为教练每个月指导20名飞行员(包括他自己在内)进行训练。每名飞行员在完成一个月的飞行任务后,必须有一个月的带薪假期,假期结束后才能再投入飞行。已知各项费用(单位略去)如下表所示,请你为甲方安排一个飞行计划。
>>>>>>> e09f8063d1806b8726f13bf7e9f104a0f55ce629

|          报酬名称          | 第一个月 | 第二个月 | 第三个月 | 第四个月 |
| :------------------------: | :------: | :------: | :------: | :------: |
|         新飞机价格         |   200    |   195    |   190    |   185    |
|    闲置的熟练飞行员报酬    |    7     |   6.9    |   6.8    |   6.7    |
| 教练及飞行员报酬和训练费用 |    10    |   9.9    |   9.8    |   9.7    |
|  执行飞行任务的飞行员报酬  |    9     |   8.9    |   9.8    |   9.7    |
|     休假期的飞行员报酬     |    5     |   4.9    |   4.8    |   4.7    |

## 问题摘要
1. 飞行基地需要进行四个月飞行，次数分别为2次,3次,3次,4次。
2. 每次飞行由50架飞机组成，每架飞机需要3名飞行员。
3. 每个飞机与每名飞行员一个月只能飞行一次
4. 飞行员完成一个月的飞行后必须休息一个月
5. 飞行结束有20%的概率同时失去一名飞行员与一架飞机
6. 每月初可以招聘飞行员、购买新飞机
7. 购买的新飞机一个月后才能开始启用
8. 新飞行员必须在熟练飞行员指导下一个月才能飞行
9. 每个月不参与飞行的教练可以指导20名飞行员(包括他自己在内)进行训练

初始条件：在第1个月开始时,甲方拥有110架飞机和330名熟练的飞行员


## 问题分析

|          报酬名称          | 第一个月 | 第二个月 | 第三个月 | 第四个月 |
| :------------------------: | :------: | :------: | :------: | :------: |
|         新飞机价格         |   200    |   195    |   190    |   185    |
|    闲置的熟练飞行员报酬    |    7     |   6.9    |   6.8    |   6.7    |
| 教练及飞行员报酬和训练费用 |    10    |   9.9    |   9.8    |   9.7    |
|  执行飞行任务的飞行员报酬  |    9     |   8.9    |   9.8    |   9.7    |
|     休假期的飞行员报酬     |    5     |   4.9    |   4.8    |   4.7    |

要在完成飞行任务的前提下使飞行员所花费的总价格最少，新飞行员必须在熟练飞行员指导下训练一个月后能投入飞行，所以在第四个月就没有购买新飞机和训练新飞行员的必要了，表格中也只有前三个月的购买情况。$x_n$表示第$n$个月购买新飞机的数量，$y_n$表示第$n$个月安排教练的数量



## 问题一的模型假设与分析

对于问题一，购买新飞机数和教练的安排数量进行如下假设:

| 月份 | 购买新飞机数 | 安排教练 |
| ---- | ------------ | -------- |
| 1    | $x_1$        | $y_1$    |
| 2    | $x_2$        | $y_2$    |
| 3    | $x_3$        | $y_3$    |

从第二个月后开始，后一个月可以使用的飞机数量为前一个月所剩余的飞机数和新购买的飞机数之和，而后一个月可用的飞行员为前一个月闲置飞行员，新飞行员，带薪休假飞行员的数量之和。根据以上假设，我们有一下结论:

| 月份 |    可用飞机数    |      可用飞行员数       | 带薪休假人数 |      闲置飞行员数       |
| :--: | :--------------: | :---------------------: | :----------: | :---------------------: |
|  1   |       110        |           330           |      0       |        $30-y_1$         |
|  2   |     $90+x_1$     |       $30+19y_1$        |     240      |     $19y_1-y_2-420$     |
|  3   |   $x_1+x_2+60$   |    $19y_1+19y_2-180$    |     360      |  $19y_1+19y_2-y_3-630$  |
|  4   | $x_1+x_2+x_3+30$ | $19y_1+19y_2+19y_3-270$ |     360      | $19y_1+19y_2+19y_3-630$ |

则最后的支出为

$Cost=min(200x_1+580.6y_1+195x_2+447.6y_2+190x_3+316.5y_3+8730)​$

/*Adam今晚看下书在写这个不等式的解释*/

针对以上约束条件，我们使用`lingo`软件进行求解

```lisp
min=200*x1+580.6*y1+195*x2+447.6*y2+190*x3+316.5*y3+8730;
90+x1>=150;
30+19*y1>=450;
x1+x2+60>=150;
19*y1+19*y2-180>=450;
x1+x2+x3+30>=200;
19*y1+19*y2+19*y3-270>=600;
@gin(x1);@gin(y1);@gin(x2);@gin(y2);@gin(x3);@gin(y3);
```

生成的最后结果为:

```
 Global optimal solution found.
  Objective value:                              63855.40
  Objective bound:                              63855.40

  Total variables:                      6
  Nonlinear variables:                  0
  Integer variables:                    6

  Total constraints:                    7
  Nonlinear constraints:                0

  Total nonzeros:                      18
  Nonlinear nonzeros:                   0

                                Variable           Value        Reduced Cost
                                      X1        60.00000            200.0000
                                      Y1        23.00000            580.6000
                                      X2        30.00000            195.0000
                                      Y2        11.00000            447.6000
                                      X3        80.00000            190.0000
                                      Y3        12.00000            316.5000

                                     Row    Slack or Surplus      Dual Price
                                       1        63855.40           -1.000000
                                       2        0.000000            0.000000
                                       3        17.00000            0.000000
                                       4        0.000000            0.000000
                                       5        16.00000            0.000000
                                       6        0.000000            0.000000
                                       7        4.000000            0.000000

```

## 问题二的模型假设与分析

对于问题二，购买新飞机数和教练的安排数量进行如下假设:

| 月份 | 购买新飞机数 | 安排教练 | 总共的飞机数量 |
| ---- | ------------ | -------- | -------------- |
| 1    | $x_1$        | $y_1$    | $$m_1$$        |
| 2    | $x_2$        | $y_2$    | $$m_2$$        |
| 3    | $x_3$        | $y_3$    | $$m_3$$        |
| 4    | $x_4$        | $x_5$    | $$m_4$$        |

并对于教练数量，限制飞行员数量和新飞行员数量进行如下假设

| 月份 | 教练数量 | 安排新飞行员数量 | 闲置飞行员数量 | 总共的飞行员数量 |
| ---- | -------- | ---------------- | -------------- | ---------------- |
| 1    | $u_1$    | $w_1$            | $v_1$          | $$n_1$$          |
| 2    | $u_2$    | $w_2$            | $v_2$          | $$n_2$$          |
| 3    | $u_3$    | $w_3$            | $v_3$          | $$n_3$$          |
| 4    | $u_4$    | $w_4$            | $v_4$          | $$n_4$$          |

此时，总的花费包括了：（1）新飞机费用，（2）闲置的熟练飞行员报酬，（3）a.教练报酬 b.熟练飞行员报酬，（4）执行飞行任务的熟练飞行员报酬，（5）休假期间的熟练飞行员报酬

与问题一相同的是（1）（2）（4）（5）中的费用，因此需要求出（3）的费用

与问题一相同，在同样的飞机数量限制条件下，修改飞机的数量限制约束如下
$$
\begin{align}
&\qquad m_1=110\\
&\qquad n_1=330\\
&\qquad m_2=m_1-2\times50\times0.2+x_1\\
&\qquad n_2=n_1-2\times50\times0.2+19u_1\\
&\qquad m_3=m_2-2\times50\times0.2+x_2\\
&\qquad n_3=n_2-2\times50\times0.2+19u_2+2\times50\times3\times0.8\\
&\qquad m_4=m_3-2\times50\times0.2+x_3\\
&\qquad n_4=n_3-2\times50\times0.2+19u_3+2\times50\times3\times0.8\\
\end{align}
$$
建立目标函数使总的花费最低$$ min \quad sum1 = \quad200x_{1}+195x_{2}+190x_{3}+185x_{4}+10\times20u_{1}+9.9\times20u_2+9.8\times20u_3+9.7\times20u_4+7（n_1-2\times50\times3-u_1)+6.9(n_2-3\times50\times3-u_2)+6.8(n_3-3\times50\times3-u_3)+6.7(n_4-4\times50\times3-u_4)+10w_1+9.9w_{2}+9.8w_{3}+9.7w_{4}$$

执行飞行任务的熟练飞行员总报酬是$$sum_2=(9+8.9+9.8+9.7)\times2\times50\times3=16935​$$

休假期间的熟练飞行员总报酬是

$$sum_2=4.9\times2\times50\times3+4.8\times3\times50\times3\times0.8=2904​$$

根据实际情况分析建立下面的约束条件，对飞行员的数量进行约束
$$
\begin{align}
&\qquad x_1\geq0\\
&\qquad x_2\geq0\\
&\qquad x_3\geq0\\
&\qquad x_4\geq0\\
&\qquad 0\leq u_1\leq n_1-2\times50\times3\\
&\qquad 0\leq u_2\leq n_2-2\times50\times3\\
&\qquad 0\leq u_3\leq n_3-2\times50\times3\\
&\qquad m_2\geq3\times50\\
&\qquad m_3\geq3\times50\\
&\qquad m_4\geq4\times50\\
&\qquad n_2\geq3\times50\times3\\
&\qquad n_3\geq3\times50\times3\\
&\qquad n_4\geq4\times50\times3\\
\end{align}
$$


则最终的约束条件由上述构成



因此最终优化目标的最小值即最小总费用为

## 总结
本问题的核心难点在于对于限制条件的数学量化表达，将本体复杂的题目简化后进行建模，我们发现，问题主要存在四个研究对象即变量：新购买的飞机数，闲置的飞机数量、教授数量与新飞行员数量，有了这四个研究对象，飞行员的选择问题可以抽象成以多个不等式为约束条件的最值表达式，再使用LINGO对其求解则可以得出最优解。
